-- GUI kiểu mới với thiết kế đẹp và tính năng spam E 50 lần/s
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ModernGui"

-- Tạo Frame chính
local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 400, 0, 250)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
mainFrame.BorderSizePixel = 0
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.ClipsDescendants = true
mainFrame.Active = true
mainFrame.Draggable = true

-- Tạo tiêu đề cho GUI
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
title.Text = "Modern GUI"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.TextAlign = Enum.TextAlign.Center

-- Tạo nút để bật/tắt tính năng spam E
local toggleButton = Instance.new("TextButton", mainFrame)
toggleButton.Size = UDim2.new(0.8, 0, 0, 40)
toggleButton.Position = UDim2.new(0.1, 0, 0.3, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleButton.Text = "Turn ON"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 18

-- Logic cho nút bật/tắt
local isSpamming = false
local VirtualInputManager = game:GetService("VirtualInputManager")

toggleButton.MouseButton1Click:Connect(function()
    isSpamming = not isSpamming
    toggleButton.Text = isSpamming and "Turn OFF" or "Turn ON"

    if isSpamming then
        task.spawn(function()
            while isSpamming do
                task.wait(0.02) -- 50 lần mỗi giây (0.02 giây = 50 lần/s)
                VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
                task.wait(0.001)
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
            end
        end)
    end
end)

-- Tạo thanh trượt (slider) nếu bạn muốn thêm tùy chỉnh
local slider = Instance.new("Frame", mainFrame)
slider.Size = UDim2.new(0.8, 0, 0, 10)
slider.Position = UDim2.new(0.1, 0, 0.6, 0)
slider.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
slider.BorderSizePixel = 0

local sliderBar = Instance.new("Frame", slider)
sliderBar.Size = UDim2.new(0.5, 0, 1, 0)
sliderBar.Position = UDim2.new(0, 0, 0, 0)
sliderBar.BackgroundColor3 = Color3.fromRGB(200, 200, 200)

-- Xử lý thanh trượt
sliderBar.Draggable = true
sliderBar.MouseButton1Drag:Connect(function()
    local mouse = player:GetMouse()
    local newPos = UDim2.new(0, mouse.X - slider.AbsolutePosition.X, 0, 0)
    sliderBar.Position = newPos
end)

-- Tính năng đóng/mở GUI khi nhấn Ctrl
local UserInputService = game:GetService("UserInputService")
local isGuiVisible = true

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.LeftControl and not gameProcessed then
        isGuiVisible = not isGuiVisible
        gui.Enabled = isGuiVisible
    end
end)
